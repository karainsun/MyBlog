import{_ as x,B as A,a as C,g as D,b as T,c as P,m as I,d as M}from"./index.628d7b3c.js";import{d as j,u as q,m as E,j as m,C as B,q as R,N as V,M as Y,r as N,c as a,b as d,a as t,F as u,I as _,G as c,R as z,p as G,f as L,o,w as r,J as h}from"./vendor.3a2e8e53.js";const O=j({name:"home",components:{Banner:A},setup(){const e=q(),f=E(()=>e.state.banners.order_1),w=E(()=>e.state.user),b=m([]),F=E(()=>e.state.newPosts),y=m([]),g=m([]),n=m([]),s=m("\u52A0\u8F7D\u66F4\u591A"),i=B({pageNo:1,pageSize:10,title:"",tag:""}),$=p=>{if(s.value!=="\u5DF2\u7ECF\u5230\u5E95\u4E86~")return s.value="\u52A0\u8F7D\u4E2D...",M(p).then(l=>{l.code===200&&(s.value=l.data.list.length>=1?"\u52A0\u8F7D\u66F4\u591A":"\u5DF2\u7ECF\u5230\u5E95\u4E86~",i.pageNo===1?n.value=l.data.list:i.pageNo>1&&l.data.list.forEach(k=>{n.value.push(k)}))}).catch(l=>{console.log(l)})},S=()=>{i.pageNo+=1};return R(async()=>{try{$(i),await e.dispatch("getNewPosts",{limit:5});const p=await C();y.value=p.data,await D().then(l=>g.value=l.data),await T().then(l=>b.value=l.data)}catch(p){console.log("Error\uFF1A",p)}}),V(()=>i.pageNo,()=>{$(i)}),{list:n,dayjs:Y,loadMore:S,loadTxt:s,user:w,tags:b,newPosts:F,allPosts:y,archives:P,monthToEn:I,category:g,banner:f}}}),v=e=>(G("data-v-1e16dcea"),e=e(),L(),e),H={class:"home"},J={class:"list d-flex pt-20"},K={class:"articles box-sizing"},U={class:"title text-ellipsis fs-26 pb-15 pointer"},Q={class:"content mb-15"},W={class:"description text-hide pb-10 pointer fs-14 text-gray"},X={class:"time-tags d-flex mb-10"},Z={class:"tags"},ss={class:"createtime pl-10 fs-14 text-gray-a3"},ts={class:"sidebar box-sizing"},es={class:"info pb-15 mb-15"},as={class:"avatar shadow-all"},os=["src"],ns={class:"sign fs-14 mt-15 mb-15"},is=z('<ul class="contact d-flex" data-v-1e16dcea><li class="iconfont icon-info-1" data-v-1e16dcea></li><li class="iconfont icon-info-2" data-v-1e16dcea></li><li class="iconfont icon-info-3" data-v-1e16dcea></li><li class="iconfont icon-info-4" data-v-1e16dcea></li></ul>',1),ls={class:"info pb-15 mb-15"},cs=v(()=>t("h3",{class:"text-gray fs-14 mt-15 mb-15"},"FEATURED TAGS",-1)),ds={class:"tags"},rs={class:"info pb-15 mb-15"},us=v(()=>t("h3",{class:"text-gray fs-14 mt-15 mb-15"},"RECENT POSTS",-1)),_s={class:"posts pos-rel"},hs={class:"info pb-15 mb-15"},ps=v(()=>t("h3",{class:"text-gray fs-14 mt-15 mb-15"},"ARCHIVES",-1)),ms={class:"posts pos-rel"},fs={class:"info pb-15 mb-15"},gs=v(()=>t("h3",{class:"text-gray fs-14 mt-15 mb-15"},"CATEGORIES",-1)),vs={class:"posts pos-rel"};function bs(e,f,w,b,F,y){const g=N("banner"),n=N("router-link");return o(),a("div",H,[d(g,{title:e.banner.title,image:e.banner.banner,desc:e.banner.desc},null,8,["title","image","desc"]),t("div",J,[t("div",K,[(o(!0),a(u,null,_(e.list,s=>(o(),a("div",{key:s.id,class:"item mb-20 pb-15"},[t("h2",U,[d(n,{to:{path:`/post/${s.id}`}},{default:r(()=>[h(c(s.title),1)]),_:2},1032,["to"])]),d(n,{to:{path:`/post/${s.id}`}},{default:r(()=>[t("div",Q,[t("p",W,c(s.description),1)])]),_:2},1032,["to"]),t("div",X,[t("div",Z,[(o(!0),a(u,null,_(s.tags,i=>(o(),a("span",{class:"iconfont icon-tag",key:i.id},[d(n,{to:{path:"/tags",query:{name:`tag_${i.name}`}}},{default:r(()=>[h(c(i.name),1)]),_:2},1032,["to"])]))),128))]),t("i",ss,"Posted by Kay on "+c(e.dayjs(s.created_at).format("YYYY-MM-DD")),1)])]))),128)),t("div",{class:"read-more",onClick:f[0]||(f[0]=(...s)=>e.loadMore&&e.loadMore(...s))},c(e.loadTxt),1)]),t("div",ts,[t("div",es,[t("div",as,[t("img",{class:"w-full h-full",src:e.user.avatar,alt:""},null,8,os)]),t("h3",ns,c(e.user.sign),1),is]),t("div",ls,[cs,t("ul",ds,[(o(!0),a(u,null,_(e.tags,s=>(o(),a("li",{key:s.id},[d(n,{to:{path:"/tags",query:{name:`tag_${s.name}`}}},{default:r(()=>[h(c(s.name),1)]),_:2},1032,["to"])]))),128))])]),t("div",rs,[us,t("ul",_s,[(o(!0),a(u,null,_(e.newPosts,s=>(o(),a("li",{class:"text-hide",key:s.id},[d(n,{to:{path:`/post/${s.id}`}},{default:r(()=>[h(c(s.title),1)]),_:2},1032,["to"])]))),128))])]),t("div",hs,[ps,t("ul",ms,[(o(!0),a(u,null,_(e.archives(e.allPosts,"created_at","month",7),s=>(o(),a("li",{class:"text-hide",key:s.id},[d(n,{to:"/archives"},{default:r(()=>[h(c(`${e.monthToEn(s.month)} ${new Date(s.month).getFullYear()} (${s.posts.length})`),1)]),_:2},1024)]))),128))])]),t("div",fs,[gs,t("ul",vs,[(o(!0),a(u,null,_(e.category,s=>(o(),a("li",{class:"text-hide",key:s.id},[d(n,{to:{path:"/category",query:{name:`cate_${s.name}`}}},{default:r(()=>[h(c(`${s.name} (${s.count})`),1)]),_:2},1032,["to"])]))),128))])])])])])}var ws=x(O,[["render",bs],["__scopeId","data-v-1e16dcea"]]);export{ws as default};
